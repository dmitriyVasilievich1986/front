(self.webpackChunkreact_front=self.webpackChunkreact_front||[]).push([[349],{9349:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var a=n(7294),r=n(9847),o=n(7703),l=n(9669),u=n.n(l),c=n(9596),i=n(2757),s=n(5234),f=n.n(s);function m(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,r=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done)&&(n.push(l.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==u.return||u.return()}finally{if(r)throw o}}return n}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const p=(0,o.$j)((function(t){return{fullCatalog:t.main.fullCatalog,token:t.main.token,user:t.main.user}}),null)((function(t){var e=d(a.useState("new blog"),2),n=e[0],o=e[1],l=d(a.useState(!0),2),s=l[0],g=(l[1],d(a.useState("new"),2)),b=g[0],p=g[1],v=d(a.useState([]),2),h=v[0],y=v[1],w=d(a.useState([]),2),S=w[0],E=w[1],C=d(a.useState(""),2),x=C[0],k=C[1],A=d(a.useState({}),2),j=(A[0],A[1],d(a.useState(null),2)),N=j[0],I=j[1],O=d(a.useState("new"),2),_=O[0],Z=O[1],T=d(a.useState("new"),2),$=T[0],D=T[1];a.useEffect((function(e){var n;(null===(n=t.fullCatalog)||void 0===n?void 0:n.child)&&p(t.fullCatalog.child[0].name),u().get("/api/catalog/").then((function(t){var e=t.data;E(t.data),u().get("/api/blog/").then((function(t){y([].concat(m(t.data),[{name:"new",title:"new",text:"new blog",id:null}]));var n=e.filter((function(e){return e.id==t.data[0].catalog}))[0];k(n.name)})).catch((function(t){return console.log(t.message)}))})).catch((function(t){return console.log(t.message)}))}),[s]);return t.user&&t.user.is_superuser?a.createElement("div",null,a.createElement("div",{className:"row"},a.createElement("p",{className:"mr1"},"blog name:"),a.createElement("select",{style:{width:"250px"},value:b,onChange:function(t){return function(t){if("new"==t)return o("new blog"),p("new"),Z("new"),D("new"),void I(null);p(t),Z(t),u().get("/api/blog/".concat(t,"/by_name/")).then((function(t){o(t.data.text),I(t.data.id),D(t.data.title)})).catch((function(t){return console.log(t)}))}(t.target.value)}},h.map((function(t){return a.createElement("option",{value:t.name,key:t.name},t.title)})))),a.createElement("div",{className:"row"},a.createElement("p",{className:"mr1"},"blog name:"),a.createElement("select",{style:{width:"250px"},value:x,onChange:function(t){return k(t.target.value)}},S.map((function(t){return a.createElement("option",{value:t.name,key:t.name},t.name)})))),a.createElement("input",{type:"text",value:_,onChange:function(t){return Z(t.target.value)}}),a.createElement("input",{type:"text",value:$,onChange:function(t){return D(t.target.value)}}),a.createElement("button",{className:"btn btn-blue",onClick:function(t){var e,a;_==b&&null!==N?(e=S.filter((function(t){return t.name==x}))[0].id,a={title:$,text:n,catalog:e},u().patch("/api/blog/".concat(N,"/"),a,(0,c.Z)()).then((function(t){o(t.data.text),D(t.data.title)})).catch((function(t){return console.log(t.message)}))):(console.log("new blog"),function(t){var e=S.filter((function(t){return t.name==x}))[0].id,a={name:_,title:$,text:n,catalog:e};u().post("/api/blog/",a,(0,c.Z)()).then((function(t){y([].concat(m(h),[t.data])),o(t.data.text),D(t.data.title),p(t.data.name),Z(t.data.name)})).catch((function(t){return console.log(t.message)}))}())}},_==b&&null!=N?"Save":"New"),a.createElement(i.CKEditor,{editor:f(),data:n,onChange:function(t,e){var n=e.getData();o(n)}})):a.createElement(r.Z,null)}))}}]);